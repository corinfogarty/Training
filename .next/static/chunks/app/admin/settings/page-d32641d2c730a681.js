(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[140],{1506:function(e,a,r){Promise.resolve().then(r.bind(r,143))},143:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return c}});var s=r(7437),i=r(2265),t=r(6581),n=r(5823),l=r(6716),d=r(3557);function c(){let[e,a]=(0,i.useState)({allowRegistration:!0,requireEmailVerification:!0,maxResourcesPerUser:100,maxCategoriesPerUser:10}),r=async a=>{a.preventDefault();try{if(!(await fetch("/api/admin/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to update settings")}catch(e){console.error("Error updating settings:",e)}};return(0,s.jsx)(d.Z,{children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"h3 mb-1",children:"Settings"}),(0,s.jsx)("p",{className:"text-muted mb-0",children:"Configure application settings"})]})}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-md-6",children:(0,s.jsx)(t.Z,{children:(0,s.jsx)(t.Z.Body,{children:(0,s.jsxs)(n.Z,{onSubmit:r,children:[(0,s.jsx)(n.Z.Group,{className:"mb-3",children:(0,s.jsx)(n.Z.Check,{type:"switch",id:"allowRegistration",label:"Allow New Registrations",checked:e.allowRegistration,onChange:e=>a(a=>({...a,allowRegistration:e.target.checked}))})}),(0,s.jsx)(n.Z.Group,{className:"mb-3",children:(0,s.jsx)(n.Z.Check,{type:"switch",id:"requireEmailVerification",label:"Require Email Verification",checked:e.requireEmailVerification,onChange:e=>a(a=>({...a,requireEmailVerification:e.target.checked}))})}),(0,s.jsxs)(n.Z.Group,{className:"mb-3",children:[(0,s.jsx)(n.Z.Label,{children:"Max Resources Per User"}),(0,s.jsx)(n.Z.Control,{type:"number",value:e.maxResourcesPerUser,onChange:e=>a(a=>({...a,maxResourcesPerUser:parseInt(e.target.value)}))})]}),(0,s.jsxs)(n.Z.Group,{className:"mb-3",children:[(0,s.jsx)(n.Z.Label,{children:"Max Categories Per User"}),(0,s.jsx)(n.Z.Control,{type:"number",value:e.maxCategoriesPerUser,onChange:e=>a(a=>({...a,maxCategoriesPerUser:parseInt(e.target.value)}))})]}),(0,s.jsx)(l.Z,{type:"submit",variant:"primary",children:"Save Settings"})]})})})}),(0,s.jsx)("div",{className:"col-md-6",children:(0,s.jsx)(t.Z,{children:(0,s.jsxs)(t.Z.Body,{children:[(0,s.jsx)("h5",{className:"card-title",children:"Database Management"}),(0,s.jsx)("p",{className:"text-muted",children:"Manage database operations"}),(0,s.jsx)(l.Z,{variant:"danger",className:"me-2",onClick:()=>{window.confirm("Are you sure? This will permanently delete all inactive users.")},children:"Clean Inactive Users"}),(0,s.jsx)(l.Z,{variant:"warning",onClick:()=>{window.confirm("Are you sure? This will reset all user progress.")},children:"Reset Progress"})]})})})]})]})})}},3557:function(e,a,r){"use strict";r.d(a,{Z:function(){return d}});var s=r(7437),i=r(2749),t=r(4033),n=r(2265),l=r(382);function d(e){var a;let{children:r}=e,{data:d,status:c}=(0,i.useSession)(),o=(0,t.useRouter)();return((0,n.useEffect)(()=>{var e;"unauthenticated"===c?o.push("/auth/signin"):"authenticated"!==c||(null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.isAdmin)||o.push("/")},[c,d,o]),"loading"===c)?(0,s.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:(0,s.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(null==d?void 0:null===(a=d.user)||void 0===a?void 0:a.isAdmin)?(0,s.jsx)(s.Fragment,{children:r}):(0,s.jsxs)(l.Z,{variant:"danger",className:"m-4",children:[(0,s.jsx)(l.Z.Heading,{children:"Access Denied"}),(0,s.jsx)("p",{children:"You need administrator privileges to access this page."})]})}},6581:function(e,a,r){"use strict";r.d(a,{Z:function(){return C}});var s=r(2744),i=r.n(s),t=r(2265),n=r(5956),l=r(7437);let d=t.forwardRef(({className:e,bsPrefix:a,as:r="div",...s},t)=>(a=(0,n.vE)(a,"card-body"),(0,l.jsx)(r,{ref:t,className:i()(e,a),...s})));d.displayName="CardBody";let c=t.forwardRef(({className:e,bsPrefix:a,as:r="div",...s},t)=>(a=(0,n.vE)(a,"card-footer"),(0,l.jsx)(r,{ref:t,className:i()(e,a),...s})));c.displayName="CardFooter";var o=r(8069);let m=t.forwardRef(({bsPrefix:e,className:a,as:r="div",...s},d)=>{let c=(0,n.vE)(e,"card-header"),m=(0,t.useMemo)(()=>({cardHeaderBsPrefix:c}),[c]);return(0,l.jsx)(o.Z.Provider,{value:m,children:(0,l.jsx)(r,{ref:d,...s,className:i()(a,c)})})});m.displayName="CardHeader";let u=t.forwardRef(({bsPrefix:e,className:a,variant:r,as:s="img",...t},d)=>{let c=(0,n.vE)(e,"card-img");return(0,l.jsx)(s,{ref:d,className:i()(r?`${c}-${r}`:c,a),...t})});u.displayName="CardImg";let h=t.forwardRef(({className:e,bsPrefix:a,as:r="div",...s},t)=>(a=(0,n.vE)(a,"card-img-overlay"),(0,l.jsx)(r,{ref:t,className:i()(e,a),...s})));h.displayName="CardImgOverlay";let x=t.forwardRef(({className:e,bsPrefix:a,as:r="a",...s},t)=>(a=(0,n.vE)(a,"card-link"),(0,l.jsx)(r,{ref:t,className:i()(e,a),...s})));x.displayName="CardLink";var f=r(4617);let v=(0,f.Z)("h6"),g=t.forwardRef(({className:e,bsPrefix:a,as:r=v,...s},t)=>(a=(0,n.vE)(a,"card-subtitle"),(0,l.jsx)(r,{ref:t,className:i()(e,a),...s})));g.displayName="CardSubtitle";let j=t.forwardRef(({className:e,bsPrefix:a,as:r="p",...s},t)=>(a=(0,n.vE)(a,"card-text"),(0,l.jsx)(r,{ref:t,className:i()(e,a),...s})));j.displayName="CardText";let p=(0,f.Z)("h5"),N=t.forwardRef(({className:e,bsPrefix:a,as:r=p,...s},t)=>(a=(0,n.vE)(a,"card-title"),(0,l.jsx)(r,{ref:t,className:i()(e,a),...s})));N.displayName="CardTitle";let y=t.forwardRef(({bsPrefix:e,className:a,bg:r,text:s,border:t,body:c=!1,children:o,as:m="div",...u},h)=>{let x=(0,n.vE)(e,"card");return(0,l.jsx)(m,{ref:h,...u,className:i()(a,x,r&&`bg-${r}`,s&&`text-${s}`,t&&`border-${t}`),children:c?(0,l.jsx)(d,{children:o}):o})});y.displayName="Card";var C=Object.assign(y,{Img:u,Title:N,Subtitle:g,Body:d,Link:x,Text:j,Header:m,Footer:c,ImgOverlay:h})},8069:function(e,a,r){"use strict";let s=r(2265).createContext(null);s.displayName="CardHeaderContext",a.Z=s}},function(e){e.O(0,[749,963,372,756,971,938,744],function(){return e(e.s=1506)}),_N_E=e.O()}]);