(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{5644:function(e,s,t){Promise.resolve().then(t.bind(t,74))},74:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var n=t(7437),i=t(2265),r=t(1387),a=t(5823),d=t(6716),c=t(3557);function l(){let[e,s]=(0,i.useState)([]),[t,l]=(0,i.useState)(!0);(0,i.useEffect)(()=>{o()},[]);let o=async()=>{try{let e=await fetch("/api/admin/users");if(!e.ok)throw Error("Failed to fetch users");let t=await e.json();s(t)}catch(e){console.error("Error fetching users:",e)}finally{l(!1)}},h=async(e,s)=>{try{if(!(await fetch("/api/admin/users/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isAdmin:s})})).ok)throw Error("Failed to update user");o()}catch(e){console.error("Error updating user:",e)}};return t?(0,n.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:(0,n.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,n.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,n.jsx)(c.Z,{children:(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"h3 mb-1",children:"Users"}),(0,n.jsx)("p",{className:"text-muted mb-0",children:"Manage user roles and permissions"})]})}),(0,n.jsxs)(r.Z,{hover:!0,responsive:!0,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Email"}),(0,n.jsx)("th",{children:"Admin"}),(0,n.jsx)("th",{children:"Created"}),(0,n.jsx)("th",{children:"Actions"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.email}),(0,n.jsx)("td",{children:(0,n.jsx)(a.Z.Check,{type:"switch",checked:e.isAdmin,onChange:s=>h(e.id,s.target.checked)})}),(0,n.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),(0,n.jsx)("td",{children:(0,n.jsx)(d.Z,{variant:"outline-danger",size:"sm",onClick:()=>{window.confirm("Are you sure you want to delete this user?")},children:"Delete"})})]},e.id))})]})]})})}},3557:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var n=t(7437),i=t(2749),r=t(4033),a=t(2265),d=t(382);function c(e){var s;let{children:t}=e,{data:c,status:l}=(0,i.useSession)(),o=(0,r.useRouter)();return((0,a.useEffect)(()=>{var e;"unauthenticated"===l?o.push("/auth/signin"):"authenticated"!==l||(null==c?void 0:null===(e=c.user)||void 0===e?void 0:e.isAdmin)||o.push("/")},[l,c,o]),"loading"===l)?(0,n.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:(0,n.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,n.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(null==c?void 0:null===(s=c.user)||void 0===s?void 0:s.isAdmin)?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsxs)(d.Z,{variant:"danger",className:"m-4",children:[(0,n.jsx)(d.Z.Heading,{children:"Access Denied"}),(0,n.jsx)("p",{children:"You need administrator privileges to access this page."})]})}},1387:function(e,s,t){"use strict";var n=t(2744),i=t.n(n),r=t(2265),a=t(5956),d=t(7437);let c=r.forwardRef(({bsPrefix:e,className:s,striped:t,bordered:n,borderless:r,hover:c,size:l,variant:o,responsive:h,...u},m)=>{let x=(0,a.vE)(e,"table"),j=i()(s,x,o&&`${x}-${o}`,l&&`${x}-${l}`,t&&`${x}-${"string"==typeof t?`striped-${t}`:"striped"}`,n&&`${x}-bordered`,r&&`${x}-borderless`,c&&`${x}-hover`),f=(0,d.jsx)("table",{...u,className:j,ref:m});if(h){let e=`${x}-responsive`;return"string"==typeof h&&(e=`${e}-${h}`),(0,d.jsx)("div",{className:e,children:f})}return f});s.Z=c}},function(e){e.O(0,[749,963,372,756,971,938,744],function(){return e(e.s=5644)}),_N_E=e.O()}]);