"use strict";(()=>{var e={};e.id=963,e.ids=[963],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},79372:(e,t,o)=>{o.r(t),o.d(t,{headerHooks:()=>h,originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>d});var r={};o.r(r),o.d(r,{GET:()=>c});var i=o(95419),n=o(69108),a=o(99678),s=o(78070);function l(e,t){for(let o of t){let t=e.match(o);if(t?.[1])return t[1]}return null}async function c(e){let{searchParams:t}=new URL(e.url),o=t.get("url");if(!o||!function(e){try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}}(o))return s.Z.json({error:"Invalid URL",title:"Invalid URL",siteName:"Error"},{status:400});try{let e=new URL(o);console.log("Fetching preview for:",o);let t=function(e){try{let t=new URL(e);if(t.hostname.includes("youtube.com"))return t.searchParams.get("v");if("youtu.be"===t.hostname)return t.pathname.slice(1);return null}catch{return null}}(o);if(t)return console.log("YouTube video detected, ID:",t),s.Z.json({title:"YouTube Video",image:`https://img.youtube.com/vi/${t}/maxresdefault.jpg`,siteName:"YouTube",type:"video"});let r=function(e){for(let[t,o]of Object.entries({"youtube.com":"https://www.youtube.com/img/desktop/yt_1200.png","youtu.be":"https://www.youtube.com/img/desktop/yt_1200.png","github.com":"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png","linkedin.com":"https://static.licdn.com/aero-v1/sc/h/3usjoqvsfrr7z3ovwvk8r6mz0","figma.com":"https://cdn.sanity.io/images/599r6htc/localized/46a76c802176eb17b04e12108de7e7e0f3736dc6-1108x1108.png","twitter.com":"https://abs.twimg.com/responsive-web/client-web/icon-ios.b1fc727a.png","medium.com":"https://miro.medium.com/v2/1*m-R_BkNf1Qjr1YbyOIJY2w.png","codepen.io":"https://assets.codepen.io/t-1/codepen-logo.svg"}))if(e.includes(t))return o;return null}(e.hostname);r&&console.log("Using default image for:",e.hostname);let i=await fetch(o,{headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.114 Safari/537.36"},next:{revalidate:3600}}).catch(e=>(console.error("Error fetching URL:",e),null));if(!i?.ok)return console.log("Failed to fetch URL, using default image"),s.Z.json({title:e.hostname,siteName:e.hostname,type:"link",image:r,error:"Failed to fetch URL"});let n=await i.text(),a=l(n,[/<meta[^>]*property="og:image"[^>]*content="([^"]*)"[^>]*>/i,/<meta[^>]*content="([^"]*)"[^>]*property="og:image"[^>]*>/i,/<meta[^>]*name="twitter:image"[^>]*content="([^"]*)"[^>]*>/i,/<meta[^>]*content="([^"]*)"[^>]*name="twitter:image"[^>]*>/i,/<link[^>]*rel="image_src"[^>]*href="([^"]*)"[^>]*>/i,/<link[^>]*href="([^"]*)"[^>]*rel="image_src"[^>]*>/i]);if(console.log("Found meta image:",a),!a){let e;let t=/<img[^>]*src="([^"]*)"[^>]*>/gi;for(;null!==(e=t.exec(n));){let t=e[0],o=e[1],r=t.match(/width="(\d+)"/i),i=t.match(/height="(\d+)"/i);if(r&&i){let e=parseInt(r[1]),t=parseInt(i[1]);if(e>=200&&t>=200){a=o,console.log("Found large image in HTML:",a);break}}}}if(a){let t=function(e,t){try{if(!e)return null;if(e.startsWith("//"))return`https:${e}`;if(e.startsWith("/")){let o=new URL(t);return`${o.origin}${e}`}if(e.startsWith("http"))return e;return new URL(e,t).toString()}catch(e){return console.error("Error converting to absolute URL:",e),null}}(a,e.origin);t&&(a=t,console.log("Converted to absolute URL:",a))}!a&&r&&(a=r,console.log("Using default image fallback"));let c=l(n,[/<meta[^>]*property="og:title"[^>]*content="([^"]*)"[^>]*>/i,/<meta[^>]*content="([^"]*)"[^>]*property="og:title"[^>]*>/i,/<title>(.*?)<\/title>/i])||e.hostname,u=l(n,[/<meta[^>]*property="og:description"[^>]*content="([^"]*)"[^>]*>/i,/<meta[^>]*content="([^"]*)"[^>]*property="og:description"[^>]*>/i,/<meta[^>]*name="description"[^>]*content="([^"]*)"[^>]*>/i])||"",p=l(n,[/<meta[^>]*property="og:site_name"[^>]*content="([^"]*)"[^>]*>/i,/<meta[^>]*content="([^"]*)"[^>]*property="og:site_name"[^>]*>/i])||e.hostname,m={title:c,description:u,image:a,siteName:p,type:"link"};return console.log("Preview result:",m),s.Z.json(m)}catch(e){return console.error("Error processing URL:",e),s.Z.json({title:"Invalid URL",siteName:"Error",type:"link",error:"Failed to process URL"})}}let u=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/preview/route",pathname:"/api/preview",filename:"route",bundlePath:"app/api/preview/route"},resolvedPagePath:"/Users/corinfogarty/Desktop/Dev Playground/Training/app/api/preview/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:h,staticGenerationBailout:d}=u,f="/api/preview/route";function v(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[431,206],()=>o(79372));module.exports=r})();